<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1, viewport-fit=cover">
    <title>LINE Official Account Coupon</title>
    <!-- 引入 Tailwind CSS (若畫面空白請確認設備是否有網路能讀取此CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* 避免滾動條影響佈局 */
        body.modal-open {
            overflow: hidden;
        }

        /* 隱藏預設捲動軸 */
        ::-webkit-scrollbar {
            display: none;
        }
        
        /* 淡化效果 (已使用狀態) */
        #fade-wrapper {
            transition: opacity 0.4s ease-in-out;
        }
        .is-used #fade-wrapper {
            opacity: 0.35;
            pointer-events: none;
        }
    </style>
</head>
<body class="bg-gray-100 text-[#111111] font-sans antialiased selection:bg-green-200">

    <!-- 主容器模擬手機畫面 -->
    <div id="app" class="max-w-md mx-auto bg-white min-h-screen relative shadow-2xl flex flex-col">
        
        <!-- Header -->
        <header class="flex items-center justify-between px-5 py-3.5 bg-white sticky top-0 z-20 border-b border-gray-100">
            <h1 class="text-[19px] font-bold text-black tracking-wide">官方帳號優惠券</h1>
            <button class="w-8 h-8 flex items-center justify-end text-black" aria-label="關閉">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-[26px] h-[26px]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        </header>

        <!-- 滾動內容區 -->
        <div class="overflow-y-auto flex-1 pb-28 bg-white">
            
            <!-- 【狀態 3 會淡化的區塊】 -->
            <div id="fade-wrapper">
                <!-- OA Info -->
                <div class="flex items-center justify-between px-5 py-4">
                    <div class="flex items-center space-x-2.5">
                        <img src="https://profile.line-scdn.net/0hirYGZhqONl1kPia4cKdJClh7ODATEDAVHF0rbBNuO20bDiNbCgh-axVua2waDndcWwh7OxQ-O25A" alt="Cake" class="w-[42px] h-[42px] rounded-full object-cover border border-gray-200">
                        <div class="flex flex-col justify-center">
                            <div class="flex items-center space-x-1">
                                <!-- 藍色星星認證 Icon -->
                                <svg viewBox="0 0 24 24" class="w-[18px] h-[18px]" fill="#143c78">
                                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                                    <path d="M12 16l-3.5 2 1-4.5L6 10h4.5L12 6l1.5 4H18l-3.5 3.5 1 4.5z" fill="white"/>
                                </svg>
                                <span class="font-bold text-[16px] text-[#111111]">Cake</span>
                            </div>
                            <span class="text-[14px] text-gray-400 mt-0.5">@314aodly</span>
                        </div>
                    </div>
                    <!-- 可使用1張 Badge -->
                    <div class="flex items-center space-x-1 border border-gray-200 bg-white text-gray-500 text-[13px] px-2.5 py-1.5 rounded-md font-medium shrink-0">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none"><path fill="#949494" d="M4.41 4.9V3.522h.787V4.9zm0 2.465V5.986h.787v1.379zm0 2.464V8.451h.787v1.378zm0 2.465v-1.379h.787v1.38zm4.796-6.221-.547 1.109-1.224.177.886.863-.21 1.219 1.095-.575 1.095.575-.21-1.219.886-.863-1.224-.177z"></path><path fill="#949494" d="M3.119 3.915v7.986h9.865V3.915zm-.787-.09c0-.385.312-.697.696-.697h10.047c.385 0 .696.312.696.696v8.167a.696.696 0 0 1-.696.696H3.028a.696.696 0 0 1-.696-.696z"></path><path fill="#949494" fill-rule="evenodd" d="M1.304 10.085V2.099h9.866v1.03h.787v-1.12a.696.696 0 0 0-.696-.696H1.214a.696.696 0 0 0-.696.696v8.167c0 .384.311.696.696.696h1.118v-.787z" clip-rule="evenodd"></path></svg>
                        <span>可使用1張</span>
                    </div>
                </div>

                <!-- Coupon Info -->
                <div class="px-5 pb-5">
                    <div class="flex space-x-2 mb-3.5">
                        <span class="bg-[#06C755] text-white text-[12px] font-bold px-2 py-0.5 rounded-sm tracking-wide">免費</span>
                        <span class="bg-[#FFF0E5] text-[#FF7A00] text-[12px] font-bold px-2 py-0.5 rounded-sm tracking-wide">限單次使用</span>
                    </div>
                    <h1 class="text-[22px] font-extrabold leading-snug mb-5 text-[#111111] tracking-wide" style="font-family: -apple-system, BlinkMacSystemFont, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';">老賴茶棧 －「老賴紅茶」免費兌換券</h1>
                
                    <div class="space-y-2">
                        <!-- 依據原代碼，此處無「使用條件」，僅有「有效期間」 -->
                        <div class="flex items-start">
                            <span class="text-gray-500 text-[14px] w-[72px] shrink-0 mt-0.5">有效期間</span>
                            <span class="text-gray-800 text-[14.5px]">至2026/03/31 23:59止</span>
                        </div>
                    </div>
                </div>

                <!-- Coupon Image -->
                <div class="w-full">
                    <!-- 老賴茶棧 兌換券圖片 -->
                    <img src="https://oa-coupon.line-scdn.net/0hpG30SpB7L2gOSTB2rk5QP1YXIQp9PSlgbTEyUG8ILwc9KzM_MlM8cXEiBwVhKmtnM1AGR2wyLiQrKTdOMVQ_biMbOTMjGA1JcnwJfXc1FwFqKSNBdUQrfncZFFll" class="w-full h-auto object-cover" alt="coupon-image">
                </div>

                <!-- Description -->
                <div class="px-5 py-6">
                    <p class="text-[14px] text-gray-600 mb-1.5">使用說明</p>
                    <div class="text-[14px] text-gray-400 leading-relaxed space-y-1">
                        <p>▪️ 憑本券可於老賴茶棧全台任一門市，兌換「老賴紅茶」一杯。</p>
                        <p>▪️ 本券僅限完成 Cake 2026 年轉職季活動 「AI 求職登機口」或「填問卷抽好禮」指定流程之用戶領取，每個 LINE 帳號限兌換 1 次，單筆消費最高限用 1 張，不得折換現金或找零。</p>
                        <p>▪️ 結帳前請出示本優惠券，由門市人員按下「使用優惠券」完成核銷；一經核銷或誤按使用，恕不補發。</p>
                        <p>▪️ 本券禁止轉售或作為其他商業用途；亦不得與其他折扣、優惠券或行銷活動併用。</p>
                        <p>▪️ Cake 及老賴茶棧保留修改、暫停或終止本活動與本券使用規則之權利，修改內容以官方公告為準，恕不另行通知。</p>
                    </div>
                    <p class="text-[12px] text-gray-400 mt-6">優惠券上顯示的有效期間，以UTC+08:00的時區為基準。</p>
                </div>
            </div>

            <!-- 【狀態 3 才會顯示的額外按鈕區】 (不參與淡化) -->
            <div id="extra-buttons" class="hidden flex-col items-center px-5 pb-8 space-y-5 mt-2">
                <button class="flex items-center justify-center space-x-2">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-[18px] h-[18px]"><g fill="#06C755"><path d="m11.326 14.412 3.176-3.175 1.06 1.06-4.236 4.237-2.888-2.889 1.06-1.06z"></path><path d="M6.614 3.966A1.76 1.76 0 0 1 7.86 3.45h8.278a1.76 1.76 0 0 1 1.247.517l3.206 3.206a1.76 1.76 0 0 1 .516 1.246v10.368c0 .974-.789 1.763-1.762 1.763H4.655c-.974 0-1.763-.79-1.763-1.763V8.42c0-.467.185-.916.516-1.247zm1.247.984a.26.26 0 0 0-.186.077L4.469 8.233a.26.26 0 0 0-.077.186v10.368c0 .145.117.263.263.263h14.69a.263.263 0 0 0 .264-.263V8.419a.26.26 0 0 0-.078-.186l-3.206-3.206a.26.26 0 0 0-.186-.077z"></path><path d="M20.359 8.75H3.642v-1.5h16.717z"></path></g></svg>
                    <span class="font-bold text-[15px] text-[#111111]">查看我的優惠券</span>
                </button>
                <button class="flex items-center justify-center space-x-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-[18px] h-[18px]" viewBox="0 0 24 24" fill="none" stroke="#06C755" stroke-width="2.5">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                        <circle cx="12" cy="12" r="2.5"></circle>
                        <path d="M12 8v-2M12 18v-2M8 12H6M18 12h-2"></path>
                    </svg>
                    <span class="font-bold text-[15px] text-[#111111]">尋找附近的優惠券</span>
                </button>
            </div>
        </div>

        <!-- 底部固定按鈕區 -->
        <div class="fixed bottom-0 left-1/2 -translate-x-1/2 w-full max-w-md bg-white z-10">
            <!-- 狀態 1：使用優惠券 (綠色按鈕) -->
            <button id="btn-use" onclick="openConfirmSheet()" class="w-full bg-[#00c300] text-white py-[17px] flex items-center justify-center space-x-1.5 font-bold text-[17px] hover:bg-green-600 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" height="1.3em" fill="currentColor">
                    <g transform="translate(-2 -2)"><path d="M21 4.4H8.2L7 5.6 5.8 4.4H3c-.55 0-1 .45-1 1v13.2c0 .55.45 1 1 1h2.8L7 18.4l1.2 1.2H21c.55 0 1-.45 1-1V5.4c0-.55-.45-1-1-1ZM6.35 12.65v-1.3h1.3v1.3h-1.3Zm1.3-2.71h-1.3v-1.3h1.3v1.3Zm-1.3 4.12h1.3v1.3h-1.3v-1.2999Z"></path></g>
                </svg>
                <span>使用優惠券</span>
            </button>
            
            <!-- 狀態 3：已使用 (灰色按鈕，預設隱藏) -->
            <button id="btn-used" class="hidden w-full bg-[#B7B7B7] text-white py-[18px] items-center justify-center font-bold text-[17px] cursor-not-allowed">
                已使用
            </button>
        </div>

        <!-- Global Backdrop -->
        <div id="globalBackdrop" class="fixed inset-0 bg-black/50 z-40 max-w-md mx-auto opacity-0 pointer-events-none transition-opacity duration-300 ease-in-out" onclick="closeAllSheets()"></div>

        <!-- Confirm Bottom Sheet (確認使用彈窗) -->
        <!-- 原版代碼中此優惠券沒有綠色數字，故只留下確認文字 -->
        <div id="confirmSheet" class="fixed bottom-0 left-1/2 -translate-x-1/2 w-full max-w-md bg-white rounded-t-2xl z-50 overflow-hidden transform translate-y-full transition-transform duration-300 ease-out">
            <!-- Modal Header (X按鈕) -->
            <div class="flex justify-end p-4">
                <button onclick="closeAllSheets()" class="text-gray-400 hover:text-gray-700 p-1">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Modal Content -->
            <div class="flex flex-col items-center justify-center px-5 pb-8 text-center space-y-5">
                
                <div class="space-y-3 pb-5 mt-2">
                    <h3 class="text-[20px] font-bold text-[#111111] tracking-wide">確定要使用優惠券嗎？</h3>
                    <p class="text-[14px] text-[#949494]">本操作無法取消。請先確認操作說明後再使用。</p>
                </div>
                
                <!-- 確認使用按鈕 (紅色) -->
                <button onclick="confirmUse()" class="w-full bg-[#ff334b] text-white rounded-[4px] py-[15px] font-bold text-[17px] transition-colors hover:bg-red-600 tracking-wide">
                    使用優惠券
                </button>
            </div>
        </div>

    </div>

    <!-- JavaScript 處理行為 -->
    <script>
        const backdrop = document.getElementById('globalBackdrop');
        const confirmSheet = document.getElementById('confirmSheet');
        const appContainer = document.getElementById('app');

        function openConfirmSheet() {
            document.body.classList.add('modal-open');
            
            // 顯示遮罩
            backdrop.classList.remove('opacity-0', 'pointer-events-none');
            backdrop.classList.add('opacity-100', 'pointer-events-auto');
            
            // 彈出 Bottom Sheet
            confirmSheet.classList.remove('translate-y-full');
            confirmSheet.classList.add('translate-y-0');
        }

        function closeAllSheets() {
            document.body.classList.remove('modal-open');
            
            // 隱藏遮罩
            backdrop.classList.add('opacity-0', 'pointer-events-none');
            backdrop.classList.remove('opacity-100', 'pointer-events-auto');
            
            // 收起 Bottom Sheet
            confirmSheet.classList.add('translate-y-full');
            confirmSheet.classList.remove('translate-y-0');
        }

        function confirmUse() {
            // 1. 關閉彈窗
            closeAllSheets();
            
            // 2. 替換頂層容器 class 以啟動上方區塊淡化動畫
            appContainer.classList.add('is-used');
            
            // 3. 切換底部按鈕狀態 (隱藏綠色，顯示灰色)
            document.getElementById('btn-use').classList.add('hidden');
            document.getElementById('btn-used').classList.remove('hidden');
            document.getElementById('btn-used').classList.add('flex');
            
            // 4. 顯示額外的狀態 3 選單按鈕
            const extraBtns = document.getElementById('extra-buttons');
            extraBtns.classList.remove('hidden');
            extraBtns.classList.add('flex');
            
            // 5. 將畫面捲到最下方以展示新出現的灰色按鈕
            setTimeout(() => {
                window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
            }, 100);
        }
    </script>
</body>
</html>